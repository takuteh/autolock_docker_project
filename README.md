# autolock_docker_project
autolockの環境をdockerに移植するプロジェクト
## システム構成
<img width="981" height="537" alt="スクリーンショット 2025-07-19 21 35 22" src="https://github.com/user-attachments/assets/96955d4c-9803-41d4-bf5c-74a16d9af5ee" />

※コンテナ間で連携するため、コンテナは全て共通のブリッジネットワークに属する
### Nginxコンテナ  
- オートロックの操作をLINEやSlack等のアプリで行うためwebhookを受信する部分や設定変更を行うwebアプリの配信を担当する  
- Nginxを3000番ポートで待ち受け、起動している  
- 3000番ポートはホストの3000番ポートにマッピングしている  
### MQTT Brokerコンテナ  
- 内部のAPIはMQTTで実装しているため、NginxとAutolockのデータ送受信、ローカルでのMQTT送受信の中継をしている  
- 1883番ポートはホストの1883番ポートにマッピングしている  
### Autolockコンテナ  
- オートロックのメイン処理を担当している  
- 設定を保存するため永続化ボリュームを作成する
- GPIO制御のため、特権モードで起動する   
### 認証DBコンテナ  
- ユーザー認証を担当している  
- ユーザー情報は永続化ボリュームで保持する
